# اختبار API على خادم الإنتاج

هذا الدليل يوضح كيفية تشغيل اختبارات API على خادم الإنتاج باستخدام عنوان IP مخصص.

## إعداد متغيرات البيئة

1. تأكد من وجود ملف `.env` في مجلد `server` وقم بإضافة المتغيرات التالية:

```
# إعدادات API لاختبارات الإنتاج
API_HOST=159.223.177.1  # استبدل بعنوان IP الخاص بك
API_PORT=8000           # استبدل برقم المنفذ الصحيح
API_PROTOCOL=http       # استخدم https إذا كان متاحاً
```

## تثبيت المتطلبات

تأكد من تثبيت جميع المتطلبات:

```bash
pip install -r requirements.txt
```

## تشغيل الاختبارات

### 1. إنشاء البيانات

أولاً، قم بإنشاء البيانات اللازمة:

```bash
python create_initial_data.py
python create_demo_profile.py
python create_test_data.py
```

### 2. تشغيل اختبارات API

يمكنك الآن تشغيل اختبارات API التي ستستخدم عنوان IP المحدد في ملف `.env`:

```bash
python test_api_endpoints.py
python test_alistpros_api.py
python test_alistpros_integration.py
```

### 3. خيارات إضافية

يمكنك تحديد اختبارات معينة فقط باستخدام:

```bash
python test_api_endpoints.py --test "Profile" --test "Conversations"
```

أو تخطي التحقق من اتصال الخادم:

```bash
python test_api_endpoints.py --skip-server-check
```

## استكشاف الأخطاء وإصلاحها

إذا واجهت أي مشاكل:

1. تأكد من أن الخادم يعمل وأن منفذ API متاح
2. تحقق من إعدادات الجدار الناري لضمان فتح المنفذ المحدد
3. تأكد من أن إعدادات CORS للخادم تسمح بالاتصال من العنوان الذي تجري منه الاختبار
4. تحقق من سجلات الخادم للحصول على أي أخطاء

## ملاحظات أمنية

- لا تستخدم حسابات المستخدم الحقيقية أو البيانات السرية عند إجراء الاختبارات
- حاول إجراء الاختبارات في بيئة مرحلية بدلاً من بيئة الإنتاج المباشرة إذا أمكن
- قم بإزالة بيانات الاختبار بعد الانتهاء من الاختبار 